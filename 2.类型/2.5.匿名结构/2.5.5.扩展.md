# 2.5.5.扩展

扩展被用于表示该结构具有某个给定类型的所有字段外，还具有一些额外的字段：

Extensions are used to express that a structure has all the fields of a given type as well as some additional fields of its own:

```haxe
typedef IterableWithLength<T> = {
  > Iterable<T>,
  // read only property
  var length(default, null):Int;
}

class Main {
  static public function main() {
    var array = [1, 2, 3];
    var t:IterableWithLength<Int> = array;
  }
}
```

大于操作符 `>` 被用于表示创建一个 `Iterable<T>` 的扩展。然后补充额外的类字段，此例中，需要一个 `Int` 类型的 只读 属性 `length` 。

The greater-than operator `>` denotes that an extension of `Iterable<T>` is being created, with the additional class fields following. In this case, a read-only [property](https://haxe.org/manual/class-field-property.html) `length` of type `Int` is required.

为了能与 `IterableWithLength<T>` 兼容，一个类必须能够与 `Iterable<T>` 兼容的同时提供一个 只读 的 `Int` 类型属性 `length`。以上例子中赋值了一个 `Array`，其刚好满足这两点要求。

In order to be compatible with `IterableWithLength<T>`, a type must be compatible with `Iterable<T>` and provide a read-only `length` property of type `Int`. The previous example assigns an `Array`, which happens to fulfill these requirements.



##### [since Haxe 3.1.0](https://haxe.org/manual/types-structure-extensions.html#since-haxe-3.1.0)

多个结构可以被同时扩展：

Multiple structures can be extended at once:

```haxe
typedef WithLength = {
  var length(default, null):Int;
}

typedef IterableWithLengthAndPush<T> = {
  > Iterable<T>,
  > WithLength,
  function push(a:T):Int;
}

class Main {
  static public function main() {
    var array = [1, 2, 3];
    var t:IterableWithLengthAndPush<Int> = array;
  }
}
```



##### [since Haxe 4.0.0](https://haxe.org/manual/types-structure-extensions.html#since-haxe-4.0.0)

有一个额外的记法可以被用于扩展，通过以 `&` 符号分格每一个欲扩展的结构来表示。

An alternative notation for extension can be used, denoted by separating each extended structure with an `&` symbol.

```haxe
typedef Point2D = {
  var x:Int;
  var y:Int;
}

typedef Point3D = Point2D & {z:Int};

class Main {
  static public function main() {
    var point:Point3D = {x: 5, y: 3, z: 1};
  }
}
```

补充另一例子：

```haxe
typedef IterableWithLengthAndPush<T> = {
  > Iterable<T>,
  > WithLength,
  function push(a:T):Int;
}
//可以改写为：
typedef IterableWithLengthAndPush<T> =
Iterable<T> & WithLength &
{
    function push(a:T):Int;
}
```

